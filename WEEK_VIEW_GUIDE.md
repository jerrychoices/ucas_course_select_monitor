# 📊 周视图功能说明

## 功能概述

周视图组件实现了传统的7天×11节课的课程表显示格式，类似于学校常见的纸质课程表。

## 主要特性

### 📅 课程表格式
- **7列 × 11行**: 周一到周日 × 第1-11节课
- **时间显示**: 每节课的具体时间段（如 08:00-08:50）
- **课程信息**: 显示课程名称和上课地点
- **连续课程**: 多节连续课程用箭头连接

### 🗓️ 周次导航
- **周次选择器**: 可选择学期第1-20周
- **导航按钮**: 上一周/下一周快速切换
- **当前周显示**: 醒目显示当前查看的周次

### 🎨 视觉设计
- **颜色编码**:
  - 🟢 正常课程：浅绿色背景
  - 🔴 时间冲突：浅红色背景
- **清晰布局**: 网格线分明，易于阅读
- **响应式表格**: 自动调整列宽

### 📈 统计信息
- **课程统计**: 显示当前周的课程数量
- **冲突检测**: 自动检测并统计时间冲突
- **图例说明**: 颜色含义说明

## 使用方法

### 基本操作
1. **查看课程表**: 选择课程后自动显示在周视图
2. **切换周次**: 使用周次选择器或导航按钮
3. **识别冲突**: 红色背景表示时间冲突的课程

### 课程显示格式
```
课程名称
@上课地点
```

### 连续课程显示
- 第一节课：显示完整课程信息
- 后续节课：显示 "↑" 表示连接

## 技术实现

### 数据解析
- **时间段解析**: 支持 "1-2节" 或 "5" 等格式
- **周次解析**: 支持 "1-16周" 或包含周次的文本
- **星期转换**: 数字1-7对应周一到周日

### 冲突检测算法
1. 为每个时间段创建网格坐标 (星期, 节次)
2. 检查相同坐标是否已有课程
3. 标记冲突并统计数量

### 界面组件
- **QTableWidget**: 主课程表格
- **QSpinBox**: 周次选择器
- **QPushButton**: 导航按钮
- **QFrame**: 控制栏和统计栏

## 配置选项

### 时间节次配置
```python
time_slots = {
    1: "08:00-08:50", 2: "09:00-09:50", 3: "10:10-11:00", 
    4: "11:10-12:00", 5: "14:00-14:50", 6: "15:00-15:50", 
    7: "16:10-17:00", 8: "17:10-18:00", 9: "19:00-19:50", 
    10: "20:00-20:50", 11: "21:00-21:50"
}
```

### 学期周次范围
- 默认: 1-20周
- 可在代码中调整 `setRange(1, 20)`

## 样式定制

### 颜色主题
- **正常课程**: `#d4edda` (浅绿色)
- **冲突课程**: `#f8d7da` (浅红色)
- **表头**: `#6c757d` (灰色)
- **边框**: `#dee2e6` (浅灰色)

### 字体设置
- **表头**: Arial 12px Bold
- **课程内容**: Arial 9px Bold
- **时间列**: Arial 9px

## 扩展功能建议

### 短期改进
1. **教师显示**: 在课程信息中显示授课教师
2. **课程类型**: 用不同颜色区分必修/选修课
3. **学分显示**: 显示课程学分信息

### 长期扩展
1. **拖拽调课**: 支持拖拽移动课程时间
2. **导出功能**: 导出当前周的课程表
3. **打印支持**: 优化打印格式
4. **主题切换**: 支持深色/浅色主题

## 常见问题

### Q: 为什么有些课程不显示？
A: 检查课程的周次设置，可能不在当前查看的周次范围内。

### Q: 时间冲突如何解决？
A: 红色背景表示冲突，需要手动调整课程选择或联系教务处。

### Q: 如何自定义时间段？
A: 修改 `time_slots` 字典中的时间设置。

### Q: 支持的最大周次？
A: 默认支持1-20周，可在代码中调整范围。
